<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Vector</title>
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#vector">Vector</a></li>
	<ul>

		<li><a href="#synopsis">Synopsis</a></li>
		<li><a href="#description">Description</a></li>
		<ul>

			<li><a href="#constructors">Constructors</a></li>
			<ul>

				<li><a href="#new">new</a></li>
				<li><a href="#units">units</a></li>
			</ul>

			<li><a href="#methods">Methods</a></li>
			<ul>

				<li><a href="#check">check</a></li>
				<li><a href="#is">is</a></li>
				<li><a href="#accuracy">accuracy</a></li>
				<li><a href="#round">round</a></li>
				<li><a href="#x,y,z">x,y,z</a></li>
				<li><a href="#clone">clone</a></li>
				<li><a href="#length">length</a></li>
				<li><a href="#print">print</a></li>
				<li><a href="#norm">norm</a></li>
				<li><a href="#dot">dot</a></li>
				<li><a href="#angle">angle</a></li>
				<li><a href="#cross">cross</a></li>
				<li><a href="#add">add</a></li>
				<li><a href="#subtract">subtract</a></li>
				<li><a href="#multiply">multiply</a></li>
				<li><a href="#divide">divide</a></li>
				<li><a href="#equals">equals</a></li>
				<li><a href="#operator_overloads">Operator Overloads</a></li>
				<li><a href="#add_operator">Add operator</a></li>
				<li><a href="#subtract_operator">Subtract Operator</a></li>
				<li><a href="#multiply_operator">Multiply Operator</a></li>
				<li><a href="#divide_operator">Divide Operator</a></li>
				<li><a href="#cross_operator">Cross Operator</a></li>
				<li><a href="#angle_operator">Angle Operator</a></li>
				<li><a href="#equals_operator">Equals Operator</a></li>
				<li><a href="#print_operator">Print Operator</a></li>
			</ul>

		</ul>

		<li><a href="#export_definitions">Export Definitions</a></li>
		<li><a href="#credits">Credits</a></li>
		<ul>

			<li><a href="#author">Author</a></li>
			<li><a href="#copyright">Copyright</a></li>
			<li><a href="#license">License</a></li>
		</ul>

	</ul>

</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="vector">Vector</a></h1>
<p>Manipulate 3D vectors</p>
<p><a href="mailto:PhilipRBrenan@yahoo.com,">PhilipRBrenan@yahoo.com,</a> 2004, Perl licence</p>
<p>
</p>
<h2><a name="synopsis">Synopsis</a></h2>
<p>Example t/vector.t</p>
<pre>
 #_ Vector _____________________________________________________________
 # Test 3d vectors    
 # philiprbrenan@yahoo.com, 2004, Perl License    
 #______________________________________________________________________
 
 use Math::Zap::Vector vector=&gt;'v', units=&gt;'u';
 use Test::Simple tests=&gt;7;
 
 my ($x, $y, $z) = u();
 
 ok(!$x                            == 1);
 ok(2*$x+3*$y+4*$z                 == v( 2,  3,   4));
 ok(-$x-$y-$z                      == v(-1, -1,  -1));
 ok((2*$x+3*$y+4*$z) + (-$x-$y-$z) == v( 1,  2,   3));
 ok((2*$x+3*$y+4*$z) * (-$x-$y-$z) == -9);  
 ok($x*2                           == v( 2,  0,   0));
 ok($y/2                           == v( 0,  0.5, 0));</pre>
<p>
</p>
<h2><a name="description">Description</a></h2>
<p>Manipulate 3 dimensional vectors via operators.</p>
<pre>
 
 package Math::Zap::Vector; 
 $VERSION=1.03;
 use Math::Trig;
 use Carp;
 use constant debug =&gt; 0; # Debugging level</pre>
<p>
</p>
<h3><a name="constructors">Constructors</a></h3>
<p>
</p>
<h4><a name="new">new</a></h4>
<p>Create a vector from numbers</p>
<pre>
 
 sub new($$$)
  {return round(bless({x=&gt;$_[0], y=&gt;$_[1], z=&gt;$_[2]})) if debug; 
   bless {x=&gt;$_[0], y=&gt;$_[1], z=&gt;$_[2]}; 
  }
 
 sub vector($$$) {new($_[0], $_[1], $_[2])}</pre>
<p>
</p>
<h4><a name="units">units</a></h4>
<p>Unit vectors</p>
<pre>
 
 sub units() {($x, $y, $z)}</pre>
<p>
</p>
<h3><a name="methods">Methods</a></h3>
<p>
</p>
<h4><a name="check">check</a></h4>
<p>Check its a vector</p>
<pre>
 
 sub check(@)
  {if (debug)
    {for my $v(@_)
      {confess &quot;$v is not a vector&quot; unless ref($v) eq __PACKAGE__;
      }
    }
   return (@_)
  }</pre>
<p>
</p>
<h4><a name="is">is</a></h4>
<p>Test its a vector</p>
<pre>
 
 sub is(@)
  {for my $v(@_)
    {return 0 unless ref($v) eq __PACKAGE__;
    }
   'vector';
  }</pre>
<p>
</p>
<h4><a name="accuracy">accuracy</a></h4>
<p>Get/Set accuracy for comparisons</p>
<pre>
 
 my $accuracy = 1e-10;
 
 sub accuracy
  {return $accuracy unless scalar(@_);
   $accuracy = shift();
  }</pre>
<p>
</p>
<h4><a name="round">round</a></h4>
<p>Round: round to nearest integer if within accuracy of that integer</p>
<pre>
 
 sub round($)
  {unless (debug)
    {return $_[0];
    }
   else
    {my ($a) = @_;
     for my $k(keys(%$a))
      {my $n = $a-&gt;{$k};
       my $N = int($n);
       $a-&gt;{$k} = $N if abs($n-$N) &lt; $accuracy;
      }
     return $a;
    }
  }</pre>
<p>
</p>
<h4><a name="x,y,z">x,y,z</a></h4>
<p>x,y,z components of vector</p>
<pre>
 
 sub x($) {check(@_) if debug; $_[0]-&gt;{x}}
 sub y($) {check(@_) if debug; $_[0]-&gt;{y}}
 sub z($) {check(@_) if debug; $_[0]-&gt;{z}}
 
 $x = new(1,0,0);
 $y = new(0,1,0);
 $z = new(0,0,1);</pre>
<p>
</p>
<h4><a name="clone">clone</a></h4>
<p>Create a vector from another vector</p>
<pre>
 
 sub clone($)
  {my ($v) = check(@_); # Vectors
   round bless {x=&gt;$v-&gt;x, y=&gt;$v-&gt;y, z=&gt;$v-&gt;z}; 
  }</pre>
<p>
</p>
<h4><a name="length">length</a></h4>
<p>Length of a vector</p>
<pre>
 
 sub length($)
  {my ($v) = check(@_[0..0]); # Vectors
   sqrt($v-&gt;x**2+$v-&gt;y**2+$v-&gt;z**2);
  }</pre>
<p>
</p>
<h4><a name="print">print</a></h4>
<p>Print vector</p>
<pre>
 
 sub print($)
  {my ($v) = check(@_); # Vectors
   my ($x, $y, $z) = ($v-&gt;x, $v-&gt;y, $v-&gt;z);
 
   &quot;vector($x, $y, $z)&quot;;
  }</pre>
<p>
</p>
<h4><a name="norm">norm</a></h4>
<p>Normalize vector</p>
<pre>
 
 sub norm($)
  {my ($v) = check(@_); # Vectors
      $v = $v-&gt;clone;   # Copy vector
   my $l = $v-&gt;length;
 
   $l &gt; 0 or confess &quot;Cannot normalize zero length vector $v&quot;;
 
   $v-&gt;{x} /= $l;
   $v-&gt;{y} /= $l;
   $v-&gt;{z} /= $l;
   $v;
  }</pre>
<p>
</p>
<h4><a name="dot">dot</a></h4>
<p>Dot product</p>
<pre>
 
 sub dot($$)
  {my ($a, $b) = check(@_); # Vectors
   $a-&gt;x*$b-&gt;x+$a-&gt;y*$b-&gt;y+$a-&gt;z*$b-&gt;z;
  }</pre>
<p>
</p>
<h4><a name="angle">angle</a></h4>
<p>Angle between two vectors</p>
<pre>
 
 sub angle($$)
  {my ($a, $b) = check(@_); # Vectors
   acos($a-&gt;norm-&gt;dot($b-&gt;norm));
  }</pre>
<p>
</p>
<h4><a name="cross">cross</a></h4>
<p>Cross product</p>
<pre>
 
 sub cross($$)
  {my ($a, $b) = check(@_); # Vectors
 
        new
   ((($a-&gt;y * $b-&gt;z) - ($a-&gt;z * $b-&gt;y)),
         (($a-&gt;z * $b-&gt;x) - ($a-&gt;x * $b-&gt;z)),
         (($a-&gt;x * $b-&gt;y) - ($a-&gt;y * $b-&gt;x))
   );
  }</pre>
<p>
</p>
<h4><a name="add">add</a></h4>
<p>Add vectors</p>
<pre>
 
 sub add($$)
  {my ($a, $b) = check(@_); # Vectors
   new($a-&gt;x+$b-&gt;x, $a-&gt;y+$b-&gt;y, $a-&gt;z+$b-&gt;z);
  }</pre>
<p>
</p>
<h4><a name="subtract">subtract</a></h4>
<p>Subtract vectors</p>
<pre>
 
 sub subtract($$)
  {check(@_) if debug; # Vectors
   new($_[0]-&gt;{x}-$_[1]-&gt;{x}, $_[0]-&gt;{y}-$_[1]-&gt;{y}, $_[0]-&gt;{z}-$_[1]-&gt;{z});
  }</pre>
<p>
</p>
<h4><a name="multiply">multiply</a></h4>
<p>Vector times a scalar</p>
<pre>
 
 sub multiply($$)
  {my ($a) = check(@_[0..0]); # Vector 
   my ($b) =       @_[1..1];  # Scalar
   
   confess &quot;$b is not a scalar&quot; if ref($b);
   new($a-&gt;x*$b, $a-&gt;y*$b, $a-&gt;z*$b);
  }</pre>
<p>
</p>
<h4><a name="divide">divide</a></h4>
<p>Vector divided by a non zero scalar</p>
<pre>
 
 sub divide($$)
  {my ($a) = check(@_[0..0]); # Vector 
   my ($b) =       @_[1..1];  # Scalar
 
   confess &quot;$b is not a scalar&quot; if ref($b);
   confess &quot;$b is zero&quot;         if $b == 0;
   new($a-&gt;x/$b, $a-&gt;y/$b, $a-&gt;z/$b);
  }</pre>
<p>
</p>
<h4><a name="equals">equals</a></h4>
<p>Equals to within accuracy</p>
<pre>
 
 sub equals($$)
  {my ($a, $b) = check(@_); # Vectors
   abs($a-&gt;x-$b-&gt;x) &lt; $accuracy and
   abs($a-&gt;y-$b-&gt;y) &lt; $accuracy and
   abs($a-&gt;z-$b-&gt;z) &lt; $accuracy;
  }</pre>
<p>
</p>
<h4><a name="operator_overloads">Operator Overloads</a></h4>
<p>Operator overloads</p>
<pre>
 
 use overload
  '+'        =&gt; \&amp;add3,      # Add two vectors
  '-'        =&gt; \&amp;subtract3, # Subtract one vector from another
  '*'        =&gt; \&amp;multiply3, # Times by a scalar, or vector dot product 
  '/'        =&gt; \&amp;divide3,   # Divide by a scalar
  'x'        =&gt; \&amp;cross3,    # BEWARE LOW PRIORITY! Cross product
  '&lt;'        =&gt; \&amp;angle3,    # Angle in radians between two vectors
  '&gt;'        =&gt; \&amp;angle3,    # Angle in radians between two vectors
  '=='       =&gt; \&amp;equals3,   # Equals
  '&quot;&quot;'       =&gt; \&amp;print3,    # Print
  '!'        =&gt; \&amp;length,    # Length
  'fallback' =&gt; FALSE;</pre>
<p>
</p>
<h4><a name="add_operator">Add operator</a></h4>
<p>Add operator, see <a href="#add">add</a></p>
<pre>
 
 sub add3
  {my ($a, $b) = @_;
   $a-&gt;add($b);
  }</pre>
<p>
</p>
<h4><a name="subtract_operator">Subtract Operator</a></h4>
<p>Subtract operator.</p>
<pre>
 
 sub subtract3
  {return new($_[0]-&gt;{x}-$_[1]-&gt;{x}, $_[0]-&gt;{y}-$_[1]-&gt;{y}, $_[0]-&gt;{z}-$_[1]-&gt;{z}) if ref($_[1]);
   new(-$_[0]-&gt;{x}, -$_[0]-&gt;{y}, -$_[0]-&gt;{z});
  }</pre>
<p>
</p>
<h4><a name="multiply_operator">Multiply Operator</a></h4>
<p>Multiply operator, see <a href="#multiply">multiply</a></p>
<pre>
 
 sub multiply3
  {my ($a, $b) = @_;
   return $a-&gt;dot     ($b) if ref($b);
   return $a-&gt;multiply($b);
  }</pre>
<p>
</p>
<h4><a name="divide_operator">Divide Operator</a></h4>
<p>Divide operator, see <a href="#divide">divide</a></p>
<pre>
 
 sub divide3
  {my ($a, $b, $c) = @_;
   return $a-&gt;divide($b);
  }</pre>
<p>
</p>
<h4><a name="cross_operator">Cross Operator</a></h4>
<p>Cross operator, see <a href="#cross">cross</a></p>
<pre>
 
 sub cross3
  {my ($a, $b, $c) = @_;
   return $a-&gt;cross($b);
  }</pre>
<p>
</p>
<h4><a name="angle_operator">Angle Operator</a></h4>
<p>Angle operator, see <a href="#angle">angle</a></p>
<pre>
 
 sub angle3
  {my ($a, $b, $c) = @_;
   return $a-&gt;angle($b);
  }</pre>
<p>
</p>
<h4><a name="equals_operator">Equals Operator</a></h4>
<p>Equals operator, see <a href="#equals">equals</a></p>
<pre>
 
 sub equals3
  {my ($a, $b, $c) = @_;
   return $a-&gt;equals($b);
  }</pre>
<p>
</p>
<h4><a name="print_operator">Print Operator</a></h4>
<p>Print a vector, see <a href="#print">print</a></p>
<pre>
 
 sub print3
  {my ($a) = @_;
   return $a-&gt;print;
  }</pre>
<p>
</p>
<h2><a name="export_definitions">Export Definitions</a></h2>
<p>Export <a href="#vector">vector</a>, <a href="#units">units</a>, <a href="#check">check</a>, <a href="#is">is</a></p>
<pre>
 
 use Math::Zap::Exports qw(
   vector ($$$)
   units  ()
   check  (@)
   is     (@)
  );
 
 #______________________________________________________________________
 # Package loaded successfully
 #______________________________________________________________________
 
 1;</pre>
<p>
</p>
<h2><a name="credits">Credits</a></h2>
<p>
</p>
<h3><a name="author">Author</a></h3>
<p><a href="mailto:philiprbrenan@yahoo.com">philiprbrenan@yahoo.com</a></p>
<p>
</p>
<h3><a name="copyright">Copyright</a></h3>
<p><a href="mailto:philiprbrenan@yahoo.com,">philiprbrenan@yahoo.com,</a> 2004</p>
<p>
</p>
<h3><a name="license">License</a></h3>
<p>Perl License.</p>

</body>

</html>
